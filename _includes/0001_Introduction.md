## 1.1. Что это?

Целью создания этого списка правил является попытка установить стандарты написания кода для всех версий C# (до 7.3 включительно), которые были бы удобными и практичными одновременно. Само собой, мы практикуем то, что создали. Эти правила являются одним из тех стандартов, которые лежат в основе нашей ежедневной работы в [Aviva Solutions](https://www.avivasolutions.nl) . Не все эти правила имеют четкое обоснование. Некоторые из них просто приняты у нас в качестве стандартов.

## 1.2. Зачем мне это использовать?

Некоторые воспринимают стандарты написания кода как некие ограничения, которые ущемляют свободу творчества. Но тем не менее такой подход оправдан и проверен в течение многих лет. Почему? Потому, что не каждый разработчик знает, что:

- не все знают что код читают в 10 раз чаще чем изменяют;
- не все осознают последствия использования определенных конструкций в C#;
- не каждый знает о том, каких соглашений .NET Framework следует придерживаться, например, при использовании `IDisposable`, `async`/`await` или LINQ с его отложенным исполнением;
- не каждый знает, как частные решения какой-либо задачи могут повлиять на производительность, безопасность, поддержку нескольких языков и т.д.;
- не каждый способен понять элегантный но абстрактный код другого разработчика;

## 1.3. Базовые принципы

Имеется много неочевидных вещей, с которыми я сталкивался в моей работе в качестве консультанта и которые заслуживают упоминания как минимум в одной рекомендации по написанию кода. К сожалению, объем этого руководства должен находиться в разумных пределах. Однако, чтобы ни подумали некоторые начинающие разработчики, если я что-то не упомянул в этом документе, это не значит, что это не заслуживает внимания.

С учетом вышесказанного вам следует понимать, что данный документ не в силах охватить все ситуации, с которыми вы можете столкнуться. В любом спорном случае вам следует ссылаться на базовые принципы, которые применимы в любой ситуации вне зависимости от контекста. К ним относятся:

- The Principle of Least Surprise (or Astonishment): «Правило наименьшего удивления». Вы должны выбирать наиболее очевидное решение для своих задач, чтобы не сбить с толку других разработчиков и сделать код более понятным.
- Keep It Simple Stupid (a.k.a. KISS): Дословно – «Делай это проще, тупица». Этот принцип гласит, что для решения поставленных задач необходимо выбирать наиболее простое решение.
- You Ain't Gonna Need It (a.k.a. YAGNI): «Вам это не понадобится». Он гласит: «Работайте над решением текущих задач, не пишите код только потому, что думаете, будто он пригодится вам в дальнейшем (вы можете предсказывать будущее?)»
- Don't Repeat Yourself (a.k.a. DRY): Избегайте повторения в пределах компонента, репозитория или [связанного контекста](http://martinfowler.com/bliki/BoundedContext.html), не забывая при этом о [Правиле Трех](http://lostechies.com/derickbailey/2012/10/31/abstraction-the-rule-of-three/).
- [Четыре принципа объектно-ориентированного программирования](https://github.com/TelerikAcademy/Object-Oriented-Programming/tree/master/Topics/04.%20OOP-Principles-Part-1): инкапсуляция, абстракция, наследование и полиформизм.
- Как правило, сгенерированный код не должен попадать под эти приципы. Если это возможно, измените шаблоны для генерации чтобы генерировать код который максимально соответствует этандартам.

Несмотря на то, что код может выглядеть очень неплохо, посмотрите, понятен ли он для других разработчиков, имеет ли он то поведение, которое от него следует ожидать, не пытается ли он решить те задачи, которые, возможно, возникнут в будущем. Если это не так, то стоит задуматься о рафакторинге. 

## 1.4. Как мне начать?

- Попросите всех разработчиков внимательно прочитать этот документ хотя бы один раз. Это должно дать им понимание того, какие принципы в нем содержатся. 
- Убедитесь, что всегда имеются под рукой несколько печатных копий [чеклиста](https://github.com/dennisdoomen/CSharpGuidelines/releases/latest). 
- Включите наиболее значимые правила в ваш [чеклист проекта](https://www.continuousimprover.com/2010/03/alm-practices-5-checklists.html) и проверяйте оставшиеся во время вашего [Peer Review](https://www.continuousimprover.com/2010/02/tfs-development-practices-part-2-peer.html). 
- Сделайте форк [оригинального репозитория](https://github.com/dennisdoomen/csharpguidelines) на [гитхаб](https://github.com/) и создайте свою собственную [версию](https://github.com/dennisdoomen/csharpguidelines/blob/master/LICENSE.md) документа.
- [ReSharper](http://www.jetbrains.com/resharper/) и [Rider](https://www.jetbrains.com/rider/) имеют встроенные средства анализа кода которые, при некоторой конфигурации, уже поддерживают многие аспекты данных рекомендаций. Он будет автоматически выделять любой код, который не соответствует правилам именования (например, стиль именования паскаль или верблюжья нотация), находить мертвый код и делать любые другие проверки. Одного клика мыши (или сочетания горячих клавиш) будет достаточно для того, чтоб исправить это. 
- ReSharper, кроме всего прочего, имеет окно File Structure, которое дает общее представление о членах вашего класса или интерфейса и позволяет вам легко перемещать их с помощью простого перетаскивания. 
- [CSharpGuidelinesAnalyzer](https://github.com/bkoelman/CSharpGuidelinesAnalyzer) проверяет более чем 40 правил из данных рекомендаций во время написания кода в Visual Studio 2017 и во время CI сборки.

## Почему вы создали это?

Идея пришла в 2002 году, когда Вику Харторгу (Philips Medical System) и мне была поставлена задача написания [стандартов кодирования](http://www.tiobe.com/content/paperinfo/gemrcsharpcs.pdf) для C# 1.0. С того времени я регулярно добавлял, удалял и изменял правила основываясь на своем опыте, отзывах сообщества и появлении новых средств разработки в .NET экосистеме. Хочу вырозить отдельный благодарности [Bart Koelman](https://github.com/bkoelman) за то, что он был очень активным контрибьютером на протяжении всех этих лет.

Кроме того, после прочтения книги [Роберта Мартина](https://sites.google.com/site/unclebobconsultingllc/)'s [Clean Code: A Handbook of Agile Software Craftsmanship](http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882), я загорелся его идеями и решил включить некоторые из них в качестве правил. Хочу заметить, что этот документ ни в коем случае не является заменой его книги. Я искренне рекомендую прочесть его книгу, чтобы твердо усвоить принципы, лежащие в основе его рекомендаций.

К тому же я решил дополнить принципы написания кода некоторыми принципами проектирования. Они являются слишком важными, чтобы их игнорировать, и имеют большое влияние на достижение высокого качества кода.

## 1.6. Эти рекомендации являются стандартами?

В этом документе не утверждается, что в проектах необходимо строго соблюдать эти рекомендации. Также в нем не утверждается, что эти рекомендации более важны, чем остальные. Однако мы рекомендуем, чтобы вы сами решили, какие рекомендации важны, какие отклонения от стандарта можно допустить в проекте, кто будет консультантом в случае, если возникнут сомнения, и какую верстку использовать для исходного кода. Очевидно, именно вы должны принять эти решения, прежде чем приступить к реальной работе.

Чтобы помочь вам в выборе, я присвоил степень важности каждой рекомендации:

![](/assets/images/1.png) Правило, которым вы никогда не должны пренебрегать и которое применимо ко всем ситуациям.

![](/assets/images/2.png) Настоятельно рекомендуется соблюдать это правило.

![](/assets/images/3.png) Рекомендуется соблюдать это правило, но оно применимо не ко всем ситуациям.

## 1.7. Обратная связь и отказ от ответственности

Этот документ был составлен во многом благодаря большому вкладу членов сообщества, статьям в блогах, онлайн дискуссиям и многим годам разработки на С#. Если у вас есть вопросы, замечания и предложения пишите мне на адрес [dennis.doomen@avivasolutions.nl](mailto:dennis.doomen@avivasolutions.nl), [создайте тикет](https://github.com/dennisdoomen/csharpguidelines/issues) или поулл реквест на GitHub, пишите мне в [http://twitter.com/ddoomen](http://twitter.com/ddoomen) или [происоединяйтесь к обсуждению в Гиттер](https://gitter.im/dennisdoomen/CSharpGuidelines). Я буду пытаться регулярно пересматривать и переопубликовывать этот документ в соответствии с новыми идеями, опытом и замечаниями.

Хочу отметить, что эти рекомендации лишь отражают мое видение правильного кода на C#. Aviva Solutions не несет ответственности за любые прямые или косвенные убытки, вызванные применением стандартов, описанных в данном документе. Этот документ опобликован под лицензией Creative Commons - [Creative Commons Attribution-ShareAlike 4.0](http://creativecommons.org/licenses/by-sa/4.0/). 

## 1.8 Могу ли я создать мою собственную версию?

Конечно. [Лицензия](https://github.com/dennisdoomen/CSharpGuidelines/blob/master/LICENSE.md) позволяет вам [клонировать](https://github.com/dennisdoomen/csharpguidelines/fork), адаптировать и распространять измененную версию в пределах вашей организации до тех пор пока вы ссылаетесь на оригинальную версию. Это не обязательно, но я был бы очень счастлив если вы сошлетесь на меня как на автора. И если у вас есть хорошие идеи, рекомендации или замечания создайте тикет или, что еще лучше, клонируйте репозиторий и создайте пулл реквест.
